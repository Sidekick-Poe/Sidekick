@page "/error/{type}"
@page "/error/{type}/{additionalInformation}"
@using Sidekick.Common.Errors;
@layout ModalLayout
@inherits SidekickView

<div class="d-flex justify-center pa-8">
    <MudAlert Severity="Severity.Error" Variant="Variant.Filled">
        @Text

        @if (!string.IsNullOrEmpty(AdditionalInformation))
        {
            <div class="mt-3">
                @Resources.AdditionalInformation <b>@AdditionalInformation</b>
            </div>
        }
    </MudAlert>
</div>

<div class="d-flex justify-center">
    <MudButton Variant="Variant.Filled"
               Color="Color.Primary"
               OnClick="Close">
        @Resources.Close
    </MudButton>
</div>

@code {
    [Inject] private ErrorResources Resources { get; set; }

    [Parameter] public string Type { get; set; }
    [Parameter] public string AdditionalInformation { get; set; }

    public override string Title => Resources.Title;
    public override SidekickViewType ViewType => SidekickViewType.Modal;

    private string Text => Enum.Parse<ErrorType>(Type) switch
    {
        ErrorType.InvalidItem => Resources.InvalidItemError,
        ErrorType.UnavailableTranslation => Resources.AvailableInEnglishError,
        ErrorType.Unparsable => Resources.ParserError,
        ErrorType.ApiError => Resources.ApiError,
        _ => Resources.Error,
    };
}
