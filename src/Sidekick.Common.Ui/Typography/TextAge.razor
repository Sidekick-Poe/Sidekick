@using Sidekick.Common.Ui.Localization

<TextCaption><span title="@Title">@Text</span></TextCaption>

@inject IStringLocalizer<UiResources> Resources

@code {

    [Parameter]
    public DateTimeOffset? Date { get; set; }

    private string Text
    {
        get
        {
            if (Date == null) return Resources["Age_Never"];

            var span = DateTimeOffset.Now - Date.Value;
            if (span.Days > 1) return Resources["Age_Days", span.Days];
            if (span.Days == 1) return Resources["Age_Day", span.Days];
            if (span.Hours > 1) return Resources["Age_Hours", span.Hours];
            if (span.Hours == 1) return Resources["Age_Hour", span.Hours];
            if (span.Minutes > 1) return Resources["Age_Minutes", span.Minutes];
            if (span.Minutes == 1) return Resources["Age_Minute", span.Minutes];
            if (span.Seconds > 10) return Resources["Age_Seconds", span.Seconds];

            return Resources["Age_Now"];
        }
    }

    private string Title
    {
        get
        {
            if (Date == null) return Resources["Age_Never"];
            return Date.Value.ToLocalTime().ToString("F");
        }
    }

}
