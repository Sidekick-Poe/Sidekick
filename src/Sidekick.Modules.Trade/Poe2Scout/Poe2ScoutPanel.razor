@using Sidekick.Apis.Poe2Scout.History.Models
@using Sidekick.Modules.Trade.Components.Prices
@using Sidekick.Modules.Trade.Localization

@if (LastLog == null || Logs == null)
{
    return;
}

<div class="mb-2 bg-stone-950 rounded-lg">
    <div class="flex flex-nowrap items-center gap-2 pt-1 px-3">
        <PriceDisplay Value="LastLog.Price" Currency="@Currency"/>
        <TextCaption Class="ml-auto">@LastLog.Quantity @Resources["Listings"]</TextCaption>
    </div>
    <Poe2ScoutChart Logs="Logs"/>
</div>

@inject IStringLocalizer<TradeResources> Resources

@code {

    [Parameter]
    public List<ScoutHistoryLog>? Logs { get; set; }

    [Parameter]
    public required string Currency { get; set; }

    private ScoutHistoryLog? LastLog { get; set; }

    protected override void OnParametersSet()
    {
        LastLog = Logs?.LastOrDefault();
        base.OnParametersSet();
    }

}